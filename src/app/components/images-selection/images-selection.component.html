<div class="container-selection">
  <mat-horizontal-stepper>
    <mat-step *ngFor="let layer of layers; let i = index" label="{{layer}}">
      <div>
        <div class="choose-files">
          
            <input 
                class="btn btn-sm" 
                type="file" 
                style="display:none;" 
                accept="image/*" 
                multiple 
                (change)="selectFiles($event, layer)"
                #upload />
            <button mat-raised-button class= "upload-button" (click)="upload.click()">Choose files</button> 
          
        </div>
        
        <div *ngIf="i !== layers.length -1; else lastStep">
          <button mat-button matStepperPrevious>
            Previous
          </button>
          <button mat-button matStepperNext [disabled]="!selectedFiles" (click)="uploadFiles(layer)">
            Upload
          </button>      
        </div>
        <ng-template #lastStep>
          <button mat-button matStepperPrevious>
            Previous
          </button>
          <button mat-button matStepperNext [disabled]="!selectedFiles" (click)="uploadFiles(layer); sendConfig(); generable=true">
            Upload
          </button>
          <button mat-button color="primary" [disabled]="!generable" [routerLink]= "'/generate'" [state]="{
            data: {tempConfigObj}
          }">    
            Go to generation
          </button>
        
        </ng-template>
        

        
        
      </div>
    </mat-step>
  </mat-horizontal-stepper>

  <div>
    <img *ngFor='let preview of previews' [src]="preview" class="preview">
  </div>
  <div *ngIf="weightForms.controls.length >=1" style="margin-bottom: 0%; font-weight: 500;">
    Weights:
  </div>
  <div [formGroup]="paramGroup">
    <div formArrayName="weightForms">
      <div class="formina" *ngFor="let weight of weightForms.controls; let i=index">
     
       <!--  <label for="weight-{{ i }}">weight:</label> -->
        <input id="weight-{{ i }}" type="number" [formControlName]="i">
      </div>
    </div>
  </div>
  
  <div *ngIf="message.length" role="alert">
    <ul *ngFor="let msg of message; let i = index">
      <li style="font-size:small">{{ msg }}</li>
    </ul>
    
  </div>

<!-- <div formArrayName="weightForms">
  <div *ngFor="let weight of weightForms.controls; let i=index">
 
    <label for="weight-{{ i }}">weight:</label>
    <input id="weight-{{ i }}" type="number" [formControlName]="i">
  </div>

</div> -->
  
  
  

  

 <!--  <div *ngIf="message.length" class="alert alert-secondary my-3" role="alert">
    <ul *ngFor="let msg of message; let i = index">
      <li>{{ msg }}</li>
    </ul>
  </div>
  <div class="card mt-3">
    <div class="card-header">List of Images</div>
    <ul class="list-group list-group-flush" *ngFor="let image of imageInfos | async">
      <li class="list-group-item">
        <p><a href="{{ image.url }}">{{ image.name }}</a></p>
        <img src="{{ image.url }}" alt="{{ image.name }}" height="80px" />
      </li>
    </ul>
  </div> -->
<!-- 
  <div *ngFor="let progressInfo of progressInfos" class="mb-2">
    <span>{{ progressInfo.fileName }}</span>
    <div class="progress">
      <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar"
        attr.aria-valuenow="{{ progressInfo.value }}" aria-valuemin="0" aria-valuemax="100"
        [ngStyle]="{ width: progressInfo.value + '%' }">
        {{ progressInfo.value }}%
      </div>
    </div>
  </div> -->